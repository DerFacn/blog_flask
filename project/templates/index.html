{% extends "base.html" %}

{% block content %}
	<section class="section">
		<div class="container">
			<h1 class="title">Blog Flask</h1>
			{% with messages = get_flashed_messages() %}
        	{% if messages %}
         	   <div class="notification is-danger">
          	      {{ messages[0] }}
      	       </div>
     	    {% endif %}
			{% endwith %}
			<div class="columns">
				<div class="column is-three-quarters">
					{% if blogs %}
						{% for blog in blogs %}
							<div class="box">
								<h2 class="title is-4">{{ blog.title }}</h2>
								<h3 class="subtitle is-6">By {{ blog.name }} on {{ blog.date_created.strftime("%Y-%m-%d %H:%M") }}</h3>
								<p>{{ blog.content }}</p>
								{% if current_user.email == blog.email %}
									<br><p><a href="/delete/{{ blog.id }}">Delete</a>  <a href="/update/{{ blog.id }}">Update</a></p>
								{% endif %}
							</div>
						{% endfor %}
					{% endif %}
				</div>
				<div class="column">
					<!-- Sidebar -->
					<div class="box">
						<h2 class="title is-4">Menu</h2>
						<p><a href="{{ url_for('main.index') }}">Homepage</a></p>
						<p>{% if current_user.is_authenticated %}<a href="{{ url_for('main.profile') }}">Profile</a>{% else %}<a href="{{ url_for('auth.login') }}">Login</a>/<a href="{{ url_for('auth.signup') }}">Signup</a>{% endif %}</p>
						<p>{% if current_user.is_authenticated %}<a href="{{ url_for('blog.create') }}">Create blog</a>{% endif %}</p>
						<p>{% if current_user.is_authenticated %}<a href="{{ url_for('auth.logout') }}">Logout</a>{% endif %}</p>
					</div>
				</div>
			</div>
		</div>
	</section>
{% endblock %}